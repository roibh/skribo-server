
<html>
<head>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/angular.js/1.7.5/angular-resource.min.js"></script>

<link href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.0/css/bootstrap.min.css" rel="stylesheet" id="bootstrap-css">
 
</head>
<body ng-controller="MyController">

  <div class="container">
    <div class="row">
		
        
        <div class="col-md-12">
        <h4>רשימת משתתפים</h4>
        <div class="table-responsive">                
        <table id="mytable" class="table table-bordred table-striped">
          <thead>                   
            <th><input type="checkbox" id="checkall" /></th>
            <th>ID</th>
            <th>First Name</th>
            <th>Last Name</th>
            <th>Phone</th>
          </thead>
          <tbody>    
            <tr ng-repeat="user in users">
              <td><input type="checkbox" class="checkthis" ng-model="user.Checked" ng-checked="user.Checked" ng-change="handleUserChange(user)" /></td>
              <td>{{user.ID}} </td>
              <td>{{user.FirstName}} </td>
              <td>{{user.LastName}}  </td>
              <td>{{user.Phone}}  </td>
            </tr>
          </tbody>
</table>
 
<script>
    angular.module('myApp', ['ngResource'])
      .controller('MyController', ['$scope', '$resource', function ($scope,$resource) {
        $scope.greetMe = 'World';

        var Users = $resource('users/all');
        Users.query().$promise.then(function(users) {
          $scope.users = users;
        });

    $scope.handleUserChange = function(user)
    {
       
       var Users = $resource('/election/users/userid/'+user.ID + '?checked='+user.Checked);
        Users.get().$promise.then(function(users) {
       
        });

    }

      {{/* debugger;
       Window.Alexa.election_users().then( function (result){
      $scope.users = result;

       }) */}}
    

      }]);

    angular.element(document).ready(function() {
      angular.bootstrap(document, ['myApp']);
    });
  </script>



</body>
</html>



